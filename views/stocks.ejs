<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--Custom CSS-->
    <link rel="stylesheet" href="styles.css">
    <!--Semantic-UI CSS-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.css">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">

    <title>Add New Stock</title>
  </head>
  <body>
     <!--Vertical Navbar-->
      <%- include('header') %>

  <!-- End vertical navbar -->
  
     <!-- Page content holder -->
  <div class="page-content p-5" id="content" style="background: linear-gradient(to right, #e9edf1 47%, #ff8ab3 100%);">
    <!-- Toggle button -->
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="/">Home</a></li>
          <li class="breadcrumb-item active" aria-current="page">Add Stocks</li>
        </ol>
      </nav>
    <button id="sidebarCollapse" type="button" class="btn btn-light bg-white rounded-pill shadow-sm px-4 mb-4"><i class="align justify icon"></i><small class="text-uppercase font-weight-bold">Menu</small></button>
  
    <!-- Page content -->
    
    <h1>Add New Stock</h1>
    <br>
    <center><img class="ui medium rounded image headersvg" src="addstock.svg"></center>
    <br>
    <center><span class="btn btn-lg btn-primary btn_row_add_below_end">Add New Item <i class="plus circle icon"></i></span></center>
    <br>
    <br>
    <div class="ui fluid container">
    <form action="/submitstock" method="POST">
    <table class="ui inverted pink celled table tbl_code_with_mark" id="myTable">
      <thead>
        <tr style="background: linear-gradient(to left, #0066eb 0%, #ff8ab3 68%);">
          <th>Item No.</th>
          <th>Item ID</th>
          <th>Item Name</th>
          <th>Category</th>
          <th>Brand</th>
          <th>Quantity</th>
          <th>Per Price</th>
        </tr>
      </thead>
      
      <tbody>
        
        <tr>
          <td class="table-info"><center><input type="text" id="number1" value=1 name="number1" style="border:0;outline:0" size="4"/></center></td>
          <td class="table-danger">
            <div class="form-floating">
            <input type="text" class="form-control" id="itemid1" name="itemid1" required>
            <label for="floatingInput">Item ID</label>
            </div>
        </td>
          <td class="table-primary">
            <div class="form-floating">
              <input type="text" class="form-control" id="itemname1" name="itemname1" required>
              <label for="floatingInput">Item Name</label>
              
          </div>
          </td>
          <td class="table-warning">
            <div class="form-floating">
              <select class="form-select" aria-label="Default select example" name="category1" id="category1" required> 
                
                <% category.forEach(function(order){ %>
                  <option name="<%= order.Category %>" value="<%= order.Category %>"><%= order.Category %></option>
                <% }); %>
              
              </select>
                <label for="floatingInput">Category</label>
            </div>
          </td>
          <td class="table-warning">
            <div class="form-floating">
              <select class="form-select" aria-label="Default select example" name="brand1" id="brand1" required>
                
                <% brand.forEach(function(order){ %>
                  <option value="<%= order.Brand %>"><%= order.Brand %></option>
                  <% }); %>
              
              </select>
                <label for="floatingInput">Brand</label>
            </div>
          </td>
          <td class="table-warning">
            <div class="form-floating">
              <input type="number" class="form-control" name="size1" placeholder="Enter Quantity" value=0 id="size1" required>
              <label for="floatingInput">Quantity</label>
            </div>
          </td>
          <td class="table-success">
            <div class="form-floating">
              <input type="number" class="form-control" name="amount1" placeholder="Enter Amount" value=0 id="amount1" required>
              <label for="floatingInput">Per Price</label>
              
          </div>
          </td>
        </tr>
     
        </tbody>
        
     
        </table>
        <center><button type="submit" class="ui teal submit button">Submit</button></center>
      </form>
       
     
    </div>
    
  </div>
  <%- include('footer') %>
    <!-- Semnatic-UI Scripts -->
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.js"></script>

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>


    <script>
      $(document).ready(function($)
      {
        //--->add row at the end > start
        $(document).on('click',".btn_row_add_below_end", function(e)
        {
          var tableBody = $(document).find('.tbl_code_with_mark').find("tbody");
          var trLast = tableBody.find("tr:last");
          var trNew = trLast.clone();
          var x = document.getElementById('myTable');
          var len = x.rows.length;
          
          trLast.after(trNew);
          // trNew[0].getElementsByTagName('num').textContent = len;
          // var value = parseInt(document.getElementById('number').value, 10);
          // 
          // value = isNaN(value) ? 0 : value;
          // 
          // value++;
          // 
          // document.getElementById('number').value = value;
          // 
          // ele.innerHTML.text = len;
          // 
          // trNew[0].getElementById('num').textContent = len;
          var inputs = document.getElementsByTagName("input");
          var flag1=flag2=1;
          for (var i = 0; i < inputs.length; i++) {
            // 
            // tables[i].value = (i+1).toString()
            // tables[i].value = i + 1
            // 
            inputs[i].id = (inputs[i].id).replace(/\d+/g, '')
            inputs[i].name = (inputs[i].name).replace(/\d+/g, '')
            inputs[i].id = inputs[i].id + (flag1).toString();
            inputs[i].name = inputs[i].name + (flag1).toString();
            if(flag2%4==0)
            {
              flag1++;
            }
            flag2++;
            
            // 
          }
          var count = 0
          for (var i = 0; i < inputs.length; i++) {
            if((inputs[i].id).includes("number")){
              // 
              // 
              inputs[i].value = count + 1
              // 
              count++;
            }
          }
          for (var i = 0; i < inputs.length; i++) {
            if((inputs[i].id).includes(len.toString()) && !((inputs[i].id).includes("number")) ){
              inputs[i].value = ""
              inputs[i].innerText = ""
            }
          }
          

          selects = document.getElementsByTagName("select");
          var flag1=flag2=1;
          for (var i = 0; i < selects.length; i++) {
            selects[i].id = (selects[i].id).replace(/\d+/g, '')
            selects[i].name= (selects[i].name).replace(/\d+/g, '')
            selects[i].id = selects[i].id + (flag1).toString()
            selects[i].name = selects[i].name + (flag1).toString();
            if(flag2%3==0)
            {
              flag1++;
            }
            flag2++;
          }
          
         
        });
      });
    </script>
     <script>
      $(function() {
    // Sidebar toggle behavior
    $('#sidebarCollapse').on('click', function() {
      $('#sidebar, #content').toggleClass('active');
    });
  });
  
    </script>
  </body>
</html>